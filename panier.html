<!doctype html>
<html lang="fr" xml:lang="fr" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <title>Orinoco nouveau site de vente en ligne par catégories</title>
    <meta name="description" content="Site de vente en ligne qui vous permet de choisir la catégorie d'articles qui vous intéresse afin qu'on ne vous présente pas d'articles non pertinents">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="shortcut icon" type="image/png" href="favicon.jpg" >
	  <link rel="stylesheet" type="text/css" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Merienda:wght@400;700&display=swap" rel="stylesheet">
    <script src="main.js" defer> </script>
</head>

<body>
  <header>
    <div class="hautdepage">
      <img src="images/logo.png" alt="logo d'Orinoco"/>
      <h1>Orinoco</h1>
    </div>
    <nav>
      <ul class="row">
         <li class="hautdepage__btn"><a href="index.html">NOS PRODUITS &ensp;</a>
            <ul class="hautdepage__btn__deroulant">
              <li><a href="index.html">Ours en peluche</a></li>
              <li>Caméras</li>
              <li>Meubles en chêne</li>
            </ul>
          </li>
          <li id="commande" class="hautdepage__btn dropdown"><a href="panier.html#panier">PANIER &ensp;</a>
            <div id="panier_style" class="tourni">
              <table id="panier">
              </table>
            </div>
          </li>
        </ul>
      </nav>
  </header>
  <div class="container">
    <section id="table_panier">
        <h2> Votre panier:</h2>
         <table id="panier_commande">
          <thead>
            <tr>
              <th id="pdt_commande">Produits</th>
              <th id="prix">Prix unitaire</th>
              <th id="qte_commande">Quantité</th>
              <th id="total_par_produit">Total</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
          <tfoot>
            <tr id="totalHT">
              <td colspan="3">Total HT</td>
            </tr>
            <tr id="tva">
              <td colspan="3">TVA</td>
            </tr>
            <tr id="ttc">
              <td colspan="3"> Net à payer</td>
            </tr>
          </tfoot>
        </table>
      </section>
      <div id="formulaire">
        <p> Pour pouvoir valider votre commande, veuillez remplir toutes les rubriques de ce formulaire, merci! </p>
        <form  novalidate name="client" id="form_1"> <!--method="post" action="http://localhost:3000/api/teddies"-->
          <div class="form-group">
            <label class="label" for="nom">	Nom	</label>
            <input type="text" name="nom" id="nom" title="nom" class="form-control" pattern="[A-Za-z]{3,20}" required/>
            <span id="missNom"></span>
          </div>
          <div class="form-group">
              <label class="label" for="prenom">	Prénom	</label>
              <input type="text" name="prenom" id="prenom" title="prénom" class="form-control" pattern="[A-Za-z]{3,20}" required />
              <span id="missPrenom"></span>
          </div>
          <div class="form-group">
              <label class="label" for="adresse">	Adresse	</label>
              <input type="text" name= "adresse" id="adresse" title=" adresse" class="form-control" minlength="8" required  />
              <span id="missAdresse"></span>
          </div>
          <div class="form-group">
              <label class="label" for="ville">	Ville	</label>
              <input type="text" name= "ville" id="ville" title=" ville" class="form-control" minlength="3" required  />
              <span id="missVille"></span>
          </div>
          <div class="form-group">
              <label class="label" for="email">	Adresse email	</label>
              <input type="email" name="email" id="email" title= "adresse mail" class="form-control" required />
              <span id="missEmail"></span>
          </div>
         <button id="envoi" class="button" type="submit">Passer la commande </button>
       </form>
     </div>
  </div>

  <script type="text/javascript">

  window.addEventListener("load", function(){
    panier_commande();
  });

    // soumission du formulaire par action sur bouton de type submit
    let formValid=document.getElementById("form_1");
    formValid.addEventListener("submit",verifier);
    //fonction de vérification du formulaire avant validation (en + du HTML)
    function verifier(event){
      event.preventDefault();
      let valid=true;
      let nom = document.getElementById('nom');
      let missNom = document.getElementById('missNom');
      if(nom.validity.valueMissing){
        missNom.innerHTML="Veuillez entrez un nom";
        missNom.style.color="red";
        valid=false;
      }
      else{
        missNom.innerHTML="";
      }
      let prenom = document.getElementById('prenom');
      let missPrenom = document.getElementById('missPrenom');
      if(prenom.validity.valueMissing){
        missPrenom.textContent="Veuillez entrez un prénom";
        missPrenom.style.color="red";
        valid=false;
      }
      else{
        missPrenom.innerHTML="";
      }
      let adresse = document.getElementById('adresse');
      let missAdresse = document.getElementById('missAdresse');
      if(adresse.validity.valueMissing){
        missAdresse.textContent="Veuillez entrez une adresse postale valide";
        missAdresse.style.color="red";
        valid=false;
      }
      else{
        missAdresse.innerHTML="";
      }
      let ville = document.getElementById('ville');
      let missVille = document.getElementById('missVille');
      if(ville.validity.valueMissing){
        missVille.textContent="Veuillez entrez un nom de ville";
        missVille.style.color="red";
        valid=false;
      }
      else{
        missVille.innerHTML="";
      }
      let email = document.getElementById('email');
      let missEmail = document.getElementById('missEmail');
      if(email.validity.valueMissing){
        missEmail.textContent="Veuillez entrez un email valide";
        missEmail.style.color="red";
        valid=false;
      }
      else{
        missEmail.innerHTML="";
      }
      if(valid==true){
        envoi_commande();
      }
  }
  </script>

</body>
</html>
